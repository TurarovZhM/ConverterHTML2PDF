<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">
<link rel="icon" href="search/image/favicon.ico">
<title>PrepareGeometryBy_GMSH</title>
<link href="search/css/bootstrap.css" rel="stylesheet">
<link href="search/css/fraunhofer.css" rel="stylesheet">
<script type="text/javascript" src="search/js/jquery-1.12.0.js"></script>
<script src="search/js/bootstrap.min.js"></script>
<script src="search/js/custom.js"></script>
</head>
<body>
	<div class="fh-wrapper">
		<div class="header">
			<div class="row visible-xs" id="main-menu-top">
				    <div class="row search-nav-icon">
					    <div class="col-md-12">
					<!-- for search and navigation icon -->
						  <div id="nav-top" class="nav-top-btn"></div>
						  <div id="search-btn-index-top-icon" class="search-icon"></div>
					    </div>
				    </div>
				    <div class="row">
				      <div class="col-md-12">
					    <nav class="navbar navbar-inverse">
						    <div class="navbar-header">
						      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						      </button>
						    </div>
							<div id="navbar" class="navbar navbar-light bg-faded collapse navbar-collapse">
							  <ul class="nav navbar-nav">
								<li class="nav-item">
								  <a class="nav-link" href="MESHFREE.InputFiles.html" target="_blank">Input Files</a>
								</li>
								<li class="nav-item">
								  <a class="nav-link" href="MESHFREE.Indices.html" target="_blank">Indices</a>
								</li>
								<li class="nav-item">
								  <a class="nav-link" href="MESHFREE.GettingStarted.html" target="_blank">Getting Started</a>
								</li>
								<li class="nav-item">
								  <a class="nav-link" href="MESHFREE.Download.html" target="_blank">Download</a>
								</li>
								<li class="nav-item">
								  <a class="nav-link" href="MESHFREE.Support.html" target="_blank">Support</a>
								</li>
							  </ul>
							</div>
					      </nav>
					</div>
				      <div class="search-top">
					      <form id="search-form-index-top" >
						  <input type="text" name="queryString" id="search-text-index-top" value="" autocomplete="off" placeholder="Search" class="query-string"/>
						  <button type="submit" class="btn" id="search-btn-index-top"></button>
					      </form>
				    </div>
				</div>
			</div>
			<div class="row header-row">
				<div class="col-sm-4">
					<div class="row">
					   <a href="MESHFREE.html">
						  <img class="logo img-responsive" alt="" src="search/image/MESHFREE_Logo.png"/>
					   </a>
					</div>
					<div class= "row company_name">
						Simulate with complex geometries and complex physics
					</div>
				</div>
				<div class="col-sm-8">
					<div class="row header-search-row hidden-xs">
						<div class="search">
						  <form id="search-form-index-header" >
						      <input type="text" name="queryString" id="search-text-index-header" value="" autocomplete="off" placeholder="Search" class="query-string"/>
						      <button type="submit" class="btn" id="search-btn-index-header"><i class="glyphicon glyphicon-search"></i></button>
						  </form>
						</div>
					</div>
					<div class="row main_menu hidden-xs" id="main-menu-bottom">
					  <nav class="navbar navbar-inverse">
						<div class="navbar-header">
						  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
						    <span class="sr-only">Toggle navigation</span>
						    <span class="icon-bar"></span>
						    <span class="icon-bar"></span>
						    <span class="icon-bar"></span>
						  </button>
						</div>
							<div id="navbar" class="navbar navbar-light bg-faded collapse navbar-collapse">
							  <ul class="nav navbar-nav">
								<li class="nav-item">
								  <a class="nav-link" href="MESHFREE.InputFiles.html" target="_blank">Input Files</a>
								</li>
								<li class="nav-item">
								  <a class="nav-link" href="MESHFREE.Indices.html" target="_blank">Indices</a>
								</li>
								<li class="nav-item">
								  <a class="nav-link" href="MESHFREE.GettingStarted.html" target="_blank">Getting Started</a>
								</li>
								<li class="nav-item">
								  <a class="nav-link" href="MESHFREE.Download.html" target="_blank">Download</a>
								</li>
								<li class="nav-item">
								  <a class="nav-link" href="MESHFREE.Support.html" target="_blank">Support</a>
								</li>
							  </ul>
							</div>
					  </nav>
					</div>
				</div>
			</div>
		</div>
     <div class="breadcrumbs">
	  <div class="row breadcrumb">
	    <div class="col-md-12">
		<ul>
<li><a href="MESHFREE.html">MESHFREE</a></li>
<li><a href="MESHFREE.InputFiles.html">InputFiles</a></li>
<li><a href="MESHFREE.InputFiles.USER_common_variables.html">USER_common_variables</a></li>
<li><a href="MESHFREE.InputFiles.USER_common_variables.BoundaryElements.html">BoundaryElements</a></li>
<li><a href="MESHFREE.InputFiles.USER_common_variables.BoundaryElements.include{.html">include{</a></li>
<li><a href="MESHFREE.InputFiles.USER_common_variables.BoundaryElements.include{.MSH.html">MSH</a></li>
<li><a href="MESHFREE.InputFiles.USER_common_variables.BoundaryElements.include{.MSH.PrepareGeometryBy_GMSH.html">PrepareGeometryBy_GMSH</a></li>
		</ul>
	    </div>
	  </div>
	</div>
		<div class="border-vertical">
		  <div class="row">
		    <div class="col-md-12 content">
		    	<div class="jumbotron">
<h1>PrepareGeometryBy_GMSH</h1><p> prepare MESHFREE geometries by GMESH, an open source software for geometrical preprocessing </p>
		    	</div>
			<div class="description">
   
   
 <b> Important:</b> 
 <a href="MESHFREE.html">MESHFREE</a> needs the surface/shell of the considered geometry. <a href="MESHFREE.html">MESHFREE</a> is able to read-in different geometry formats: 
 <ul><li> 
 </li><li> <a href="MESHFREE.InputFiles.USER_common_variables.BoundaryElements.include{.STL.html">STL</a> (ASCII) 
 </li><li> FDNEUT (native Fidap Neutral geometry format) 
 </li><li> PAMCRASH 
 </li><li> NASTRAN 
 </li><li> GMSH 
 </li><li> <a href="MESHFREE.InputFiles.USER_common_variables.BoundaryElements.include{.OBJ.html">OBJ</a> 
 </li></ul> 
 Especially <a href="MESHFREE.InputFiles.USER_common_variables.BoundaryElements.include{.OBJ.html">OBJ</a> and <a href="MESHFREE.InputFiles.USER_common_variables.BoundaryElements.include{.STL.html">STL</a> are formats, that can easily be generated by most of the classical CAD-tools. <a href="MESHFREE.InputFiles.USER_common_variables.BoundaryElements.include{.STL.html">STL</a> is widely used, however consumes a lot of memory. <a href="MESHFREE.InputFiles.USER_common_variables.BoundaryElements.include{.OBJ.html">OBJ</a> is more efficient in memory, however the standard of this format is more extensive, not all features are implemented in <a href="MESHFREE.html">MESHFREE</a>. 
   
 The problem using <a href="MESHFREE.InputFiles.USER_common_variables.BoundaryElements.include{.STL.html">STL</a> or <a href="MESHFREE.InputFiles.USER_common_variables.BoundaryElements.include{.OBJ.html">OBJ</a> consists in the fact, that the used usually does not have control over the orientation (inside/outside) of the shells, which however is a necessary information for <a href="MESHFREE.html">MESHFREE</a>. 
   
 There are several features to control the orientation during start-up of <a href="MESHFREE.html">MESHFREE</a>. 
   
 A true control of the orientation and the way of surface triangulation can be taken by using the program GMESH (which is free). If you intend to work with formats like <a href="MESHFREE.InputFiles.USER_common_variables.BoundaryElements.include{.STL.html">STL</a> or <a href="MESHFREE.InputFiles.USER_common_variables.BoundaryElements.include{.OBJ.html">OBJ</a> (native CAD formats), you can skip this section. 
 In the tutorials, the geometries are mostly given as GMESH-generated files. It is clear, that the geometry could be given in different ways, of course. 
   
   
 <b> Goals of this Unit: </b> 
 <ul><li> 
 </li><li> Creation of the geometry with GMSH. 
 </li></ul> 
   
 <b> Three Dimensional geometry generation:</b> 
   
 If we want to generate the geometrical configuration file with GMSH the following steps have to be done in order to get the information required by <a href="MESHFREE.html">MESHFREE</a>: 
 <ul><li> 
 </li><li> Construction of the geometry 
 </li><li> Generation of a mesh for each face which does not belong to a volume 
 </li><li> Generation of a mesh for each volume (in case a volume has been constructed at all) 
 </li><li> Specification of the boundary type (“WALL”) and naming faces or groups of faces 
 </li><li> 2D the meshing and save the mesh. 
 </li></ul> 
   
 In a three dimensional setting volumes are not necessary. It suffices to build the faces, because <a href="MESHFREE.html">MESHFREE</a> only requires the geometrical information for the faces. If any face or boundary is not required even after the generation of the mesh by GMSH one can simply ignore the unnecessary face or boundary by using the  flag “IGNORE” in the <a href="MESHFREE.InputFiles.USER_common_variables.ALIAS.html">ALIAS</a> section in  “USER_common_variables.dat”. 
   
 <a href="MESHFREE.InputFiles.USER_common_variables.__overview_of_syntax_elements__.begin_alias{.html">begin_alias{</a>} 
 ... 
 “groupname” = “ <a href="MESHFREE.InputFiles.USER_common_variables.__overview_of_syntax_elements__.begin_alias{.IGNORE.html">IGNORE</a> ” 
 ... 
 <a href="MESHFREE.InputFiles.USER_common_variables.__overview_of_syntax_elements__.end_alias.html">end_alias</a> 
   
 How to generate a geometry using GMSH: 
   
 GMSH generates two kinds of files, namely filename.geo and filename.msh. The first file deals with the operations used to define the geometry and the second file contains the mesh generated by GMSH. 
 To open GMSH in Linux, you may use a shortcut of the following type: 
 <div class="note"> <div class="code"> alias mygmsh='/p/tv/local/Gmsh/gmsh-2.8.3-Linux/bin/gmsh &' 
 </div> </div> 
 An alias can be defined in the start-up file, such as by editing .bashrc . 
 <ol><li> 
 </li><li> kate ~/. bashrc & 
 </li><li> Edit alias section. 
 </li><li> save the file 
 </li></ol> 
 Now the shortcut command is active any time a Linux-bash shell is launched. 
   
 Now, GMSH can be started by using the command mygmsh (since the alias is defined in this way, one can change this name accordingly ). 
 At the moment when the GMSH window appears a file untitled.geo at the cd where user has opened the GMSH is generated. 
 The interface of GMSH has the following options to use: 
 Modules 
 1. <a href="MESHFREE.Solvers.Geometry.html">Geometry</a>. 
 2. Mesh. 
 3. Solver. 
 We will not use its solver section. 
   
 STARTING WITH GMSH: 
 (Here we generate a geometry using GMSH ). 
 The reader should be familiar with the geometry which will be created in this section; the annulus. The mesh will be of higher resolution. 
   
 The following steps will be undertaken: 
 <ol><li> 
 </li><li> Create the geometry using the GMSH GUI: 
   
 <ul><li> 
 </li><li> A rectangle will be formed. This rectangle represents a radial plane through the annulus. 
 </li><li> The plane will be extruded-rotated in order to form a quadrant of the annulus. 
 </li><li> The above step is then repeated, until the complete annulus is formed. 
 </li></ul> 
   
 </li><li> Define physical groups. 
 </li><li> Customize the geometry by editing the geometry script file. 
 </li><li> Produce a mesh. 
 </li></ol> 
   
 <b> Creating the geometry: Forming an annulus with extrusions</b> 
   
 Through the interface go to “Geometry>>Elementary entities>>Add>>Point” 
 and create the three points (2.5,0.0,0.0), (5.25,0.0,0.0), (8.0,0.0,0.0). 
   
 <img src=  ../Pictures/gmesh_Figure1.png alt="Here should be a picture" class="img-responsive"> 
 <em> Figure 1: </em> 
   
 The click at “Point” will create a “Contextual <a href="MESHFREE.Solvers.Geometry.html">Geometry</a> Definitions” window as shown in Figure 1. 
 At the first three spaces, the coordinates of the wanted point have to be defined and afterwards the point has to been added. Moving the mouse over the Gmsh window while adding a point may change the  value of the coordinates in an unwanted way. 
 The above created points should lie on a line along the x-direction and form a radial line across the annulus. Create two lines: the first line should connect point 1 and point 2 and the second line point 2 and point 3. This can be done by clicking on “Geometry>>Elementary entities>>Add>>Straight line” and select via mouse the points which form the line. Now, extrude the lines to create surfaces (“Geometry>>Elementary entities>>Translate>>Extrude line” ) as shown in Figure 2. 
   
   
 <img src=  ../Pictures/gmesh_Figure2.png alt="Here should be a picture" class="img-responsive"> 
 <em> Figure 2:   </em> 
   
 Fill in (x,y,z) = (0.0,0.0,14.0). Note that both lines should be selected during the extrusion step. Finally change the view of point, so that you can see the rectangles just created, the result should be something similar as in Figure 3. 
   
   
 <img src=  ../Pictures/gmesh_Figure3.png alt="Here should be a picture" class="img-responsive"> 
 <em>  Figure 3: </em> 
   
 The next step is to extrude-rotate the rectangular surface in order to create the annulus . 
   
 <ol><li> 
 </li><li> Go to the top of the geometry module in the GMSH menu window. 
 </li><li> Click on Geometry>>Rotate>>Extrude surface. The contextual <a href="MESHFREE.Solvers.Geometry.html">Geometry</a> Definitions window will appear, on the Rotation  tab. Also they will now be high-lighted on the graphic window, as red. The window is used to define the axis of revolution and the sweeping angle. The axis of revolution is defined by specifying any point on it and the components of a vector parallel to the axis. In addition, the sweeping angle must be specified in radians, in the anti-clockwise sense. 
 </li><li> Change the parameters in the Contextual Definitions window to the following: 
 0,0,0,0,0,1,pi/2. 
 </li><li> Pick both the surfaces on the graphic and press “e” (“e” is for adding the selection “u” is for undoing the last selection and “q” is for abort the mission.). A quarter of the annulus should have been formed in the graphic window, as shown in left panel of Figure 4. 
 </li></ol> 
   
 <img src=  ../Pictures/gmesh_Figure4.png alt="Here should be a picture" class="img-responsive"> 
 <em> Figure 4: </em> 
   
 Without changing the parameters in the “Contextual <a href="MESHFREE.Solvers.Geometry.html">Geometry</a> Definitions” window, pick the newly formed surfaces normal to the x- axis. And press the “e” key, to form half of the annulus. Repeat the procedure to form the complete annulus, shown in the right panel of Figure 4. 
   
 <b> Physical Groups: </b> 
   
 In case of 3D, <a href="MESHFREE.html">MESHFREE</a> needs only surfaces of the boundaries. So if created at all delete the volumes using “Geometry>>Delete>>Volume”. Doing so a small ball with yellow color will appear, selecting this volume will turn it red. 
   
 <ol><li> 
 </li><li> Go to the top of the <a href="MESHFREE.Solvers.Geometry.html">Geometry</a> module in the GMSH menu window. 
 </li><li> Click on “Geometry>>Physical groups>>Add>>Surface”. Select the surfaces needed to be specified as boundaries and press “e”. All the surfaces selected in this way will from one group. If  another group should be formed, pressing “e ” will differentiate between the groups. 
 </li><li> Open the script file i.e. filename.geo. Here, the names of the groups can be changed. 
 </li></ol> 
   
 <b> Meshing: </b> 
   
 Before meshing the normal size has to be changed. In order to do so go to “Tools>>Options>>Mesh>>Visibility>>Normals and Tangents” and change the first space to 20 (or accordingly as shown in Figure 5). 
   
 <img src=  ../Pictures/gmesh_Figure5.png alt="Here should be a picture" class="img-responsive"> 
 <em> Figure 5: </em> 
   
 Also, the Element size factor should be changed to 0.1. Therefore, go to  “Tools>>Options>>Mesh>>General”. 
 Now go to the Mesh section and build a 2D mesh by clicking on “Mesh>>2D”. Go to “File” and save the mesh (“File>>Save Mesh”). 
 Close GMSH. 
 Change the name of the files generated by editing its name. 
 Note:- Before meshing user needs to reload the file (Geometry>>Reload), in the case that changes have been done by the user that should be reloaded by GMSH. 
   
 Understanding the steps of filename.geo: 
   
 <img src=  ../Pictures/gmesh_Figure6.png alt="Here should be a picture" class="img-responsive"> 
 <em> Figure 6: </em> 
   
 Open the file cube.geo in <a href="MESHFREE.GettingStarted.Tutorial.tut3d_01.html">tut3d_01</a>, a window as in Figure 6 will appear. 
 The first two lines of the document show that two points have been created followed by their corresponding coordinates. 
 The third line implies that a line has been generated connecting Point(1)  and Point(2). 
 The fourth line says that in the direction of the x-axis (positive direction) Line{1} has been extruded to form a rectangular geometry. 
 Fifth line tells that the surface created has been extruded in the positive direction of z for one unit, to form a cube. 
 After that each line shows that a physical group has been added each time “e” was pressed (while preparing the geometry using GMSH). The names of the physical groups can be changed by writing “User_defined_Name” between the brackets following the text “Physical Surface” . 
 Note :- While saving the mesh one should check the direction of the normals in GMSH. If normals are pointing out side to the volume then it is correct if not the flag <a href="MESHFREE.InputFiles.USER_common_variables.__overview_of_syntax_elements__.begin_alias{.REV_ORIENT.html">REV_ORIENT</a> has to be used in front of the alias definitions of the corresponding surfaces in User_common_variables.dat. 
   

	      			</div>
	      		</div>
		</div>
	</div>
<div class="blank-class-outer footer visible-md visible-lg">
  <div class="border-vertical">
    <div class="row">
	      <div class="col-md-6">
		      <a href="http://itwm.fraunhofer.de" target="_blank">&copy 2020 Fraunhofer Institute for Industrial Mathematics ITWM</a>
	      </div>
	      <div class="col-md-2 footer-border-left">
			<a href="Index.html" target="_blank">Index</a>
	      </div>
	      <div class="col-md-2 footer-border-left">
			<a href="MESHFREE.Releases.html" target="_blank">Releases</a>
	      </div>
	      <div class="col-md-2 footer-border-left">
			<a href="https://svn.itwm.fraunhofer.de/svn/MESHFREEdocu/Executables/" target="_blank">Executables</a>
	      </div>
      </div>
    </div>
  </div>
  <div class="footer-small visible-xs visible-sm">
    <div class="blank-class-outer">
      <div class="blank-class-inner">
	<div class="row ">
		<div class="col-md-12">
			<a href="Index.html" target="_blank">Index</a>
	      </div>
	</div>
      </div>
    </div>
    <div class="blank-class-outer-bottom">
      <div class="blank-class-inner">
	<div class="row ">
	      <div class="col-md-12">
		      <a href="MESHFREE.Releases.html" target="_blank">Releases</a>
	      </div>
	</div>
      </div>
    </div>
    <div class="blank-class-outer-bottom">
      <div class="blank-class-inner">
	<div class="row ">
	      <div class="col-md-12">
		      <a href="https://svn.itwm.fraunhofer.de/svn/MESHFREEdocu/Executables/" target="_blank">Executables</a>
	      </div>
	</div>
      </div>
    </div>
    <div class="blank-class-outer-left-right">
      <div class="blank-class-inner">
	<div class="row ">
	      <div class="col-md-12">
		      <a href="http://itwm.fraunhofer.de" target="_blank">&copy 2020 Fraunhofer Institute for Industrial Mathematics ITWM</a>
	      </div>
	</div>
      </div>
    </div>
  </div>
</div>
</body>
</html>
